"use strict";(self.webpackChunkreact_screenshots=self.webpackChunkreact_screenshots||[]).push([["233"],{176(e,t,n){let r;n.d(t,{A:()=>en});var l=n(723),i=n(155);function a(e){let{image:t,width:n,height:r,history:l,bounds:i}=e;return new Promise((e,a)=>{let c=document.createElement("canvas"),o=i.width*window.devicePixelRatio,s=i.height*window.devicePixelRatio;c.width=o,c.height=s;let u=c.getContext("2d");if(!u)return a(Error("convert image to blob fail"));let d=t.naturalWidth/n,h=t.naturalHeight/r;u.imageSmoothingEnabled=!0,u.imageSmoothingQuality="low",u.setTransform(window.devicePixelRatio,0,0,window.devicePixelRatio,0,0),u.clearRect(0,0,i.width,i.height),u.drawImage(t,i.x*d,i.y*h,i.width*d,i.height*h,0,0,i.width,i.height),l.stack.slice(0,l.index+1).forEach(e=>{1===e.type&&e.draw(u,e)}),c.toBlob(t=>{if(!t)return a(Error("canvas toBlob fail"));e(t)},"image/png")})}let c={magnifier_position_label:"坐标",operation_ok_title:"确定",operation_cancel_title:"取消",operation_save_title:"保存",operation_redo_title:"重做",operation_undo_title:"撤销",operation_mosaic_title:"马赛克",operation_text_title:"文本",operation_brush_title:"画笔",operation_arrow_title:"箭头",operation_ellipse_title:"椭圆",operation_rectangle_title:"矩形"},o=i.createContext({store:{url:void 0,image:null,width:0,height:0,lang:c,emitterRef:{current:{}},canvasContextRef:{current:null},history:{index:-1,stack:[]},bounds:null,cursor:"move",operation:void 0},dispatcher:{call:void 0,setHistory:void 0,setBounds:void 0,setCursor:void 0,setOperation:void 0}});function s(){let{dispatcher:e}=(0,i.useContext)(o);return e}function u(){let{store:e}=(0,i.useContext)(o);return e}function d(){let{bounds:e}=u(),{setBounds:t}=s();return[e,{set:(0,i.useCallback)(e=>{null==t||t(e)},[t]),reset:(0,i.useCallback)(()=>{null==t||t(null)},[t])}]}function h(){let{lang:e}=u();return e}let f=(0,i.memo)(function(e){let{x:t,y:n}=e,{width:r,height:a,image:c}=u(),o=h(),[s,d]=(0,i.useState)(null),f=(0,i.useRef)(null),x=(0,i.useRef)(null),p=(0,i.useRef)(null),[y,m]=(0,i.useState)("000000");return(0,i.useLayoutEffect)(()=>{if(!f.current)return;let e=f.current.getBoundingClientRect(),l=t+20,i=n+20;l+e.width>r&&(l=t-e.width-20),i+e.height>a&&(i=n-e.height-20),l<0&&(l=0),i<0&&(i=0),d({x:l,y:i})},[r,a,t,n]),(0,i.useEffect)(()=>{if(!c||!x.current){p.current=null;return}if(p.current||(p.current=x.current.getContext("2d")),!p.current)return;let e=p.current;e.clearRect(0,0,100,80);let l=c.naturalWidth/r,i=c.naturalHeight/a;e.drawImage(c,t*l-50,n*i-40,100,80,0,0,100,80);let{data:o}=e.getImageData(Math.floor(50),Math.floor(40),1,1);m(Array.from(o.slice(0,3)).map(e=>e>=16?e.toString(16):`0${e.toString(16)}`).join("").toUpperCase())},[r,a,c,t,n]),(0,l.jsxs)("div",{ref:f,className:"screenshots-magnifier",style:{transform:`translate(${null==s?void 0:s.x}px, ${null==s?void 0:s.y}px)`},children:[(0,l.jsx)("div",{className:"screenshots-magnifier-body",children:(0,l.jsx)("canvas",{ref:x,className:"screenshots-magnifier-body-canvas",width:100,height:80})}),(0,l.jsxs)("div",{className:"screenshots-magnifier-footer",children:[(0,l.jsxs)("div",{className:"screenshots-magnifier-footer-item",children:[o.magnifier_position_label,": (",t,",",n,")"]}),(0,l.jsxs)("div",{className:"screenshots-magnifier-footer-item",children:["RGB: #",y]})]})]})}),x=(0,i.memo)(function(){let{url:e,image:t,width:n,height:r}=u(),[a,c]=d(),o=(0,i.useRef)(null),s=(0,i.useRef)(null),h=(0,i.useRef)(!1),[x,p]=(0,i.useState)(null),y=(0,i.useCallback)((e,t)=>{if(!o.current)return;let{x:l,y:i}=o.current.getBoundingClientRect();c.set(function(e,t,n,r){let{x:l,y:i}=e,{x:a,y:c}=t;return l>a&&([l,a]=[a,l]),i>c&&([i,c]=[c,i]),l<0&&(l=0),a>n&&(a=n),i<0&&(i=0),c>r&&(c=r),{x:l,y:i,width:a-l,height:c-i}}({x:e.x-l,y:e.y-i},{x:t.x-l,y:t.y-i},n,r))},[n,r,c]),m=(0,i.useCallback)(e=>{s.current||a||0!==e.button||(s.current={x:e.clientX,y:e.clientY},h.current=!1)},[a]);return((0,i.useEffect)(()=>{let e=e=>{if(o.current){let t=o.current.getBoundingClientRect();e.clientX<t.left||e.clientY<t.top||e.clientX>t.right||e.clientY>t.bottom?p(null):p({x:e.clientX-t.x,y:e.clientY-t.y})}s.current&&(y(s.current,{x:e.clientX,y:e.clientY}),h.current=!0)},t=e=>{s.current&&(h.current&&y(s.current,{x:e.clientX,y:e.clientY}),s.current=null,h.current=!1)};return window.addEventListener("pointermove",e),window.addEventListener("pointerup",t),()=>{window.removeEventListener("pointermove",e),window.removeEventListener("pointerup",t)}},[y]),(0,i.useLayoutEffect)(()=>{(!t||a)&&p(null)},[t,a]),e&&t)?(0,l.jsxs)("div",{ref:o,className:"screenshots-background",onPointerDown:m,children:[(0,l.jsx)("img",{className:"screenshots-background-image",src:e}),(0,l.jsx)("div",{className:"screenshots-background-mask"}),x&&!a&&(0,l.jsx)(f,{x:null==x?void 0:x.x,y:null==x?void 0:x.y})]}):null});function p(){let{cursor:e}=u(),{setCursor:t}=s();return[e,{set:(0,i.useCallback)(e=>{null==t||t(e)},[t]),reset:(0,i.useCallback)(()=>{null==t||t("move")},[t])}]}function y(){let{emitterRef:e}=u(),t=(0,i.useCallback)((t,n)=>{let r=e.current;Array.isArray(r[t])?r[t].push(n):r[t]=[n]},[e]),n=(0,i.useCallback)((t,n)=>{let r=e.current;if(Array.isArray(r[t])){let e=r[t].indexOf(n);-1!==e&&r[t].splice(e,1)}},[e]);return{on:t,off:n,emit:(0,i.useCallback)(function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),l=1;l<n;l++)r[l-1]=arguments[l];let i=e.current;Array.isArray(i[t])&&i[t].forEach(e=>{e(...r)})},[e]),reset:(0,i.useCallback)(()=>{e.current={}},[e])}}function m(){let{history:e}=u(),{setHistory:t}=s(),n=(0,i.useCallback)(n=>{let{index:r,stack:l}=e;l.forEach(e=>{1===e.type&&(e.isSelected=!1)}),1===n.type?n.isSelected=!0:0===n.type&&(n.source.isSelected=!0),l.splice(r+1),l.push(n),null==t||t({index:l.length-1,stack:l})},[e,t]),r=(0,i.useCallback)(()=>{let{stack:n}=e;n.pop(),null==t||t({index:n.length-1,stack:n})},[e,t]),l=(0,i.useCallback)(()=>{let{index:n,stack:r}=e,l=r[n];l&&(1===l.type?l.isSelected=!1:0===l.type&&l.source.editHistory.pop()),null==t||t({index:n<=0?-1:n-1,stack:r})},[e,t]),a=(0,i.useCallback)(()=>{let{index:n,stack:r}=e,l=r[n+1];l&&(1===l.type?l.isSelected=!1:0===l.type&&l.source.editHistory.push(l)),null==t||t({index:n>=r.length-1?r.length-1:n+1,stack:r})},[e,t]),c=(0,i.useCallback)(e=>{null==t||t({...e})},[t]),o=(0,i.useCallback)(n=>{e.stack.forEach(e=>{1===e.type&&(e===n?e.isSelected=!0:e.isSelected=!1)}),null==t||t({...e})},[e,t]),d=(0,i.useCallback)(()=>{e.stack.forEach(e=>{1===e.type&&(e.isSelected=!1)}),null==t||t({...e})},[e,t]),h=(0,i.useCallback)(()=>{null==t||t({index:-1,stack:[]})},[t]);return[{index:e.index,stack:e.stack,top:e.stack.slice(e.index,e.index+1)[0]},{push:n,pop:r,undo:l,redo:a,set:c,select:o,clearSelect:d,reset:h}]}function g(){let{operation:e}=u(),{setOperation:t}=s();return[e,{set:(0,i.useCallback)(e=>{null==t||t(e)},[t]),reset:(0,i.useCallback)(()=>{null==t||t(void 0)},[t])}]}let v=["top","right","bottom","left"],b=["top","top-right","right","right-bottom","bottom","bottom-left","left","left-top"],C=(0,i.memo)((0,i.forwardRef)(function(e,t){let{url:n,image:r,width:a,height:c}=u(),o=y(),[s]=m(),[h]=p(),[f,x]=d(),[C]=g(),k=(0,i.useRef)(void 0),w=(0,i.useRef)(null),S=(0,i.useRef)(null),j=(0,i.useRef)(null),R=(0,i.useRef)(null),E=f&&!s.stack.length&&!C,_=(0,i.useCallback)(()=>{if(!f||!R.current)return;let e=R.current;e.imageSmoothingEnabled=!0,e.imageSmoothingQuality="low",e.clearRect(0,0,f.width,f.height),s.stack.slice(0,s.index+1).forEach(t=>{1===t.type&&t.draw(e,t)})},[f,R,s]),X=(0,i.useCallback)((e,t)=>{if(0===e.button&&f)if(C){let t=function(e,t,n,r){if(!t)return!1;let l=document.createElement("canvas");l.width=e.width,l.height=e.height;let i=l.getContext("2d");if(!i)return!1;let{left:a,top:c}=t.getBoundingClientRect(),o=r.clientX-a,s=r.clientY-c;return[...n.stack.slice(0,n.index+1)].reverse().find(t=>{var n;return 1===t.type&&(i.clearRect(0,0,e.width,e.height),null==(n=t.isHit)?void 0:n.call(t,i,t,{x:o,y:s}))})}(f,j.current,s,e.nativeEvent);t?o.emit("drawselect",t,e.nativeEvent):o.emit("pointerdown",e.nativeEvent)}else k.current=t,w.current={x:e.clientX,y:e.clientY},S.current={x:f.x,y:f.y,width:f.width,height:f.height}},[f,C,o,s]),Y=(0,i.useCallback)(e=>{if(!k.current||!w.current||!S.current||!f)return;let t=function(e,t,n,r){let l=e.clientX-n.x,i=e.clientY-n.y,a=r.x,c=r.y,o=r.x+r.width,s=r.y+r.height;switch(t){case"top":c+=i;break;case"top-right":o+=l,c+=i;break;case"right":o+=l;break;case"right-bottom":o+=l,s+=i;break;case"bottom":s+=i;break;case"bottom-left":a+=l,s+=i;break;case"left":a+=l;break;case"left-top":a+=l,c+=i;break;case"move":a+=l,c+=i,o+=l,s+=i}return[{x:a,y:c},{x:o,y:s}]}(e,k.current,w.current,S.current);x.set(function(e,t,n,r,l,i){let{x:a,y:c}=e,{x:o,y:s}=t;return a>o&&([a,o]=[o,a]),c>s&&([c,s]=[s,c]),a<0&&(a=0,"move"===i&&(o=n.width)),o>r&&(o=r,"move"===i&&(a=o-n.width)),c<0&&(c=0,"move"===i&&(s=n.height)),s>l&&(s=l,"move"===i&&(c=s-n.height)),{x:a,y:c,width:Math.max(o-a,1),height:Math.max(s-c,1)}}(t[0],t[1],f,a,c,k.current))},[a,c,f,x]);return(0,i.useLayoutEffect)(()=>{if(!r||!f||!j.current){R.current=null;return}R.current||(R.current=j.current.getContext("2d")),_()},[r,f,_]),(0,i.useEffect)(()=>{let e=e=>{C?o.emit("pointermove",e):k.current&&w.current&&S.current&&Y(e)},t=e=>{C?o.emit("pointerup",e):k.current&&w.current&&S.current&&(Y(e),k.current=void 0,w.current=null,S.current=null)};return window.addEventListener("pointermove",e),window.addEventListener("pointerup",t),()=>{window.removeEventListener("pointermove",e),window.removeEventListener("pointerup",t)}},[Y,C,o]),(0,i.useImperativeHandle)(t,()=>R.current),(0,l.jsxs)("div",{className:"screenshots-canvas",style:{width:(null==f?void 0:f.width)||0,height:(null==f?void 0:f.height)||0,transform:f?`translate(${f.x}px, ${f.y}px)`:"none"},children:[(0,l.jsxs)("div",{className:"screenshots-canvas-body",children:[(0,l.jsx)("img",{className:"screenshots-canvas-image",src:n,style:{width:a,height:c,transform:f?`translate(${-f.x}px, ${-f.y}px)`:"none"}}),(0,l.jsx)("canvas",{ref:j,className:"screenshots-canvas-panel",width:(null==f?void 0:f.width)||0,height:(null==f?void 0:f.height)||0})]}),(0,l.jsx)("div",{className:"screenshots-canvas-mask",style:{cursor:h},onPointerDown:e=>X(e,"move"),children:E&&(0,l.jsxs)("div",{className:"screenshots-canvas-size",children:[f.width," \xd7 ",f.height]})}),v.map(e=>(0,l.jsx)("div",{className:`screenshots-canvas-border-${e}`},e)),E&&b.map(e=>(0,l.jsx)("div",{className:`screenshots-canvas-point-${e}`,onPointerDown:t=>X(t,e)},e))]})}));function k(){let{canvasContextRef:e}=u();return e}function w(e){let t=y();(0,i.useEffect)(()=>(t.on("pointerdown",e),()=>{t.off("pointerdown",e)}),[e,t])}function S(e){let t=y();(0,i.useEffect)(()=>(t.on("pointermove",e),()=>{t.off("pointermove",e)}),[e,t])}function j(e){let t=y();(0,i.useEffect)(()=>(t.on("pointerup",e),()=>{t.off("pointerup",e)}),[e,t])}function R(e){let t=y();(0,i.useEffect)(()=>(t.on("drawselect",e),()=>{t.off("drawselect",e)}),[e,t])}var E=n(316);let _=(0,i.memo)(function(e){let{open:t,content:n,children:r}=e,a=(0,i.useRef)(null),c=(0,i.useRef)(null),o=(0,i.useRef)(null),s=(0,i.useContext)(ee),[u,d]=(0,i.useState)("bottom"),[h,f]=(0,i.useState)(null),[x,p]=(0,i.useState)(0),y=()=>(c.current||(c.current=document.createElement("div")),c.current);return(0,i.useEffect)(()=>{let e=y();return t&&document.body.appendChild(e),()=>{e.remove()}},[t]),(0,i.useEffect)(()=>{if(!t||!s||!a.current||!o.current)return;let e=a.current.getBoundingClientRect(),n=o.current.getBoundingClientRect(),r=u,l=e.left+e.width/2,i=e.top+e.height,c=x;l+n.width/2>s.x+s.width&&(c=l-(l=s.x+s.width-n.width/2)),l<s.x+n.width/2&&(c=l-(l=s.x+n.width/2)),i>window.innerHeight-n.height&&("bottom"===r&&(r="top"),i=e.top-n.height),i<0&&("top"===r&&(r="bottom"),i=e.top+e.height),r!==u&&d(r),((null==h?void 0:h.x)!==l||h.y!==i)&&f({x:l,y:i}),c!==x&&p(c)}),(0,l.jsxs)(l.Fragment,{children:[(0,i.cloneElement)(r,{ref:a}),t&&n&&(0,E.createPortal)((0,l.jsxs)("div",{ref:o,className:"screenshots-option",style:{visibility:h?"visible":"hidden",transform:`translate(${(null==h?void 0:h.x)??0}px, ${(null==h?void 0:h.y)??0}px)`},"data-placement":u,children:[(0,l.jsx)("div",{className:"screenshots-option-container",children:n}),(0,l.jsx)("div",{className:"screenshots-option-arrow",style:{marginLeft:x}})]}),y())]})}),X=(0,i.memo)(function(e){let{title:t,icon:n,checked:r,disabled:a,option:c,onClick:o}=e,s=["screenshots-button"],u=(0,i.useCallback)(e=>{!a&&o&&o(e)},[a,o]);return r&&s.push("screenshots-button-checked"),a&&s.push("screenshots-button-disabled"),(0,l.jsx)(_,{open:r,content:c,children:(0,l.jsx)("div",{className:s.join(" "),title:t,onClick:u,children:(0,l.jsx)("span",{className:n})})})}),Y=(0,i.memo)(function(e){let{value:t,onChange:n}=e;return(0,l.jsx)("div",{className:"screenshots-color",children:["#ee5126","#fceb4d","#90e746","#51c0fa","#7a7a7a","#ffffff"].map(e=>{let r=["screenshots-color-item"];return e===t&&r.push("screenshots-color-active"),(0,l.jsx)("div",{className:r.join(" "),style:{backgroundColor:e},onClick:()=>null==n?void 0:n(e)},e)})})}),P=(0,i.memo)(function(e){let{value:t,onChange:n}=e;return(0,l.jsx)("div",{className:"screenshots-size",children:[3,6,9].map(e=>{let r=["screenshots-size-item"];return e===t&&r.push("screenshots-size-active"),(0,l.jsx)("div",{className:r.join(" "),onClick:()=>null==n?void 0:n(e),children:(0,l.jsx)("div",{className:"screenshots-size-pointer",style:{width:1.8*e,height:1.8*e}})},e)})})}),z=(0,i.memo)(function(e){let{size:t,color:n,onSizeChange:r,onColorChange:i}=e;return(0,l.jsxs)("div",{className:"screenshots-sizecolor",children:[(0,l.jsx)(P,{value:t,onChange:r}),(0,l.jsx)(Y,{value:n,onChange:i})]})});function H(e,t,n){e.lineWidth=1,e.strokeStyle="#000000",e.fillStyle="#ffffff",e.beginPath(),e.arc(t,n,4,0,2*Math.PI),e.fill(),e.stroke()}function M(e,t,n){t.draw(e,t);let{data:r}=e.getImageData(n.x,n.y,1,1);return r.some(e=>0!==e)}function N(e,t,n){if(!e)return!1;let{left:r,top:l}=e.getBoundingClientRect(),i=t.clientX-r,a=t.clientY-l;return(n.x-i)**2+(n.y-a)**2<16}function B(e){let{x1:t,y1:n,x2:r,y2:l}=e.data;return e.editHistory.forEach(e=>{let{data:i}=e,a=i.x2-i.x1,c=i.y2-i.y1;0===i.type?(t+=a,n+=c,r+=a,l+=c):1===i.type?(t+=a,n+=c):2===i.type&&(r+=a,l+=c)}),{...e.data,x1:t,x2:r,y1:n,y2:l}}function T(e,t){let{size:n,color:r,x1:l,x2:i,y1:a,y2:c}=B(t);e.lineCap="round",e.lineJoin="bevel",e.lineWidth=n,e.strokeStyle=r;let o=3*n,s=Math.atan2(c-a,i-l);e.beginPath(),e.moveTo(l,a),e.lineTo(i,c),e.lineTo(i-o*Math.cos(s-Math.PI/6),c-o*Math.sin(s-Math.PI/6)),e.moveTo(i,c),e.lineTo(i-o*Math.cos(s+Math.PI/6),c-o*Math.sin(s+Math.PI/6)),e.stroke(),t.isSelected&&(H(e,l,a),H(e,i,c))}function $(e,t){let{size:n,color:r,points:l}=t.data;e.lineCap="round",e.lineJoin="round",e.lineWidth=n,e.strokeStyle=r;let i=t.editHistory.reduce((e,t)=>{let{data:n}=t;return{x:e.x+n.x2-n.x1,y:e.y+n.y2-n.y1}},{x:0,y:0});e.beginPath(),l.forEach((t,n)=>{0===n?e.moveTo(t.x+i.x,t.y+i.y):e.lineTo(t.x+i.x,t.y+i.y)}),e.stroke(),t.isSelected&&(e.lineWidth=1,e.strokeStyle="#000000",e.beginPath(),l.forEach((t,n)=>{0===n?e.moveTo(t.x+i.x,t.y+i.y):e.lineTo(t.x+i.x,t.y+i.y)}),e.stroke())}function A(){let e=s();return(0,i.useCallback)(function(t){for(var n,r=arguments.length,l=Array(r>1?r-1:0),i=1;i<r;i++)l[i-1]=arguments[i];null==(n=e.call)||n.call(e,t,...l)},[e])}function L(){let e=y(),[,t]=d(),[,n]=p(),[,r]=m(),[,l]=g();return(0,i.useCallback)(()=>{e.reset(),r.reset(),t.reset(),n.reset(),l.reset()},[e,r,t,n,l])}function W(e){let{x1:t,y1:n,x2:r,y2:l}=e.data;return e.editHistory.forEach(e=>{let{data:i}=e,a=i.x2-i.x1,c=i.y2-i.y1;0===i.type?(t+=a,n+=c,r+=a,l+=c):1===i.type?n+=c:2===i.type?(r+=a,n+=c):3===i.type?r+=a:4===i.type?(r+=a,l+=c):5===i.type?l+=c:6===i.type?(t+=a,l+=c):7===i.type?t+=a:8===i.type&&(t+=a,n+=c)}),{...e.data,x1:t,x2:r,y1:n,y2:l}}function I(e,t){let{size:n,color:r,x1:l,y1:i,x2:a,y2:c}=W(t);e.lineCap="butt",e.lineJoin="miter",e.lineWidth=n,e.strokeStyle=r;let o=(l+a)/2,s=(i+c)/2,u=Math.abs(a-l)/2,d=Math.abs(c-i)/2,h=.5522848*u,f=.5522848*d;e.beginPath(),e.moveTo(o-u,s),e.bezierCurveTo(o-u,s-f,o-h,s-d,o,s-d),e.bezierCurveTo(o+h,s-d,o+u,s-f,o+u,s),e.bezierCurveTo(o+u,s+f,o+h,s+d,o,s+d),e.bezierCurveTo(o-h,s+d,o-u,s+f,o-u,s),e.closePath(),e.stroke(),t.isSelected&&(e.lineWidth=1,e.strokeStyle="#000000",e.fillStyle="#ffffff",e.beginPath(),e.moveTo(l,i),e.lineTo(a,i),e.lineTo(a,c),e.lineTo(l,c),e.closePath(),e.stroke(),H(e,(l+a)/2,i),H(e,a,i),H(e,a,(i+c)/2),H(e,a,c),H(e,(l+a)/2,c),H(e,l,c),H(e,l,(i+c)/2),H(e,l,i))}function D(e,t,n){if(!n)return[0,0,0,0];let{data:r,width:l}=n,i=t*l*4+4*e;return Array.from(r.slice(i,i+4))}function F(e,t){let{tiles:n,size:r}=t.data;n.forEach(t=>{let n=Math.round(t.color[0]),l=Math.round(t.color[1]),i=Math.round(t.color[2]),a=t.color[3]/255;e.fillStyle=`rgba(${n}, ${l}, ${i}, ${a})`,e.fillRect(t.x-r/2,t.y-r/2,r,r)})}function V(e){let{x1:t,y1:n,x2:r,y2:l}=e.data;return e.editHistory.forEach(e=>{let{data:i}=e,a=i.x2-i.x1,c=i.y2-i.y1;0===i.type?(t+=a,n+=c,r+=a,l+=c):1===i.type?n+=c:2===i.type?(r+=a,n+=c):3===i.type?r+=a:4===i.type?(r+=a,l+=c):5===i.type?l+=c:6===i.type?(t+=a,l+=c):7===i.type?t+=a:8===i.type&&(t+=a,n+=c)}),{...e.data,x1:t,x2:r,y1:n,y2:l}}function O(e,t){let{size:n,color:r,x1:l,y1:i,x2:a,y2:c}=V(t);e.lineCap="butt",e.lineJoin="miter",e.lineWidth=n,e.strokeStyle=r,e.beginPath(),e.moveTo(l,i),e.lineTo(a,i),e.lineTo(a,c),e.lineTo(l,c),e.closePath(),e.stroke(),t.isSelected&&(e.lineWidth=1,e.strokeStyle="#000000",e.fillStyle="#ffffff",H(e,(l+a)/2,i),H(e,a,i),H(e,a,(i+c)/2),H(e,a,c),H(e,(l+a)/2,c),H(e,l,c),H(e,l,(i+c)/2),H(e,l,i))}let J=`
min-width: 0 !important;
width: 0 !important;
min-height: 0 !important;
height:0 !important;
visibility: hidden !important;
overflow: hidden !important;
position: absolute !important;
z-index: -1000 !important;
top:0 !important;
right:0 !important;
`,q=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","text-indent","padding-left","padding-right","border-width","box-sizing","white-space","word-break"],Q=(0,i.memo)(function(e){let{x:t,y:n,maxWidth:a,maxHeight:c,size:o,color:s,value:u,onChange:d,onBlur:h}=e,f=(0,i.useRef)(null),x=(0,i.useRef)(null),[p,y]=(0,i.useState)(0),[m,g]=(0,i.useState)(0);return(0,i.useLayoutEffect)(()=>(f.current&&(document.body.appendChild(f.current),requestAnimationFrame(()=>{var e;null==(e=x.current)||e.focus()})),()=>{var e;null==(e=f.current)||e.remove()}),[]),(0,i.useLayoutEffect)(()=>{if(!x.current)return;let{width:e,height:t}=function(e,t,n,l){let i,a,c,o;r||((r=document.createElement("textarea")).setAttribute("tab-index","-1"),document.body.appendChild(r));let{paddingSize:s,borderSize:u,boxSizing:d,sizingStyle:h}=(a=(i=window.getComputedStyle(e)).getPropertyValue("box-sizing")||i.getPropertyValue("-moz-box-sizing")||i.getPropertyValue("-webkit-box-sizing"),c=parseFloat(i.getPropertyValue("padding-bottom"))+parseFloat(i.getPropertyValue("padding-top")),o=parseFloat(i.getPropertyValue("border-bottom-width"))+parseFloat(i.getPropertyValue("border-top-width")),{sizingStyle:q.map(e=>`${e}:${i.getPropertyValue(e)}`).join(";"),paddingSize:c,borderSize:o,boxSizing:a});r.setAttribute("style",`${h};${J};max-width:${n}px;max-height:${l}px`),r.value=t||" ";let f=r.scrollWidth,x=r.scrollHeight;return"border-box"===d?(f+=u,x+=u):"content-box"===d&&(f-=s,x-=s),{width:Math.min(f,n),height:Math.min(x,l)}}(x.current,u,a,c);y(e),g(t)},[u,a,c]),(0,E.createPortal)((0,l.jsx)("textarea",{ref:x,className:"screenshots-textarea",style:{color:s,width:p,height:m,maxWidth:a,maxHeight:c,fontSize:o,lineHeight:`${o}px`,transform:`translate(${t}px, ${n}px)`},value:u,onChange:e=>null==d?void 0:d(e.target.value),onBlur:e=>null==h?void 0:h(e)}),(f.current||(f.current=document.createElement("div")),f.current))}),G={3:18,6:32,9:46};function U(e,t){let{size:n,color:r,fontFamily:l,x:i,y:a,text:c}=t.data;e.fillStyle=r,e.textAlign="left",e.textBaseline="top",e.font=`${n}px ${l}`;let o=t.editHistory.reduce((e,t)=>{let{data:n}=t;return{x:e.x+n.x2-n.x1,y:e.y+n.y2-n.y1}},{x:0,y:0});c.split("\n").forEach((t,r)=>{e.fillText(t,i+o.x,a+o.y+r*n)})}function K(e,t,n){e.textAlign="left",e.textBaseline="top",e.font=`${t.data.size}px ${t.data.fontFamily}`;let r=0,l=0;t.data.text.split("\n").forEach(n=>{let i=e.measureText(n);r<i.width&&(r=i.width),l+=t.data.size});let{x:i,y:a}=t.editHistory.reduce((e,t)=>{let{data:n}=t;return{x:e.x+n.x2-n.x1,y:e.y+n.y2-n.y1}},{x:0,y:0}),c=t.data.x+i,o=t.data.y+a,s=c+r,u=o+l;return n.x>=c&&n.x<=s&&n.y>=o&&n.y<=u}let Z=[function(){let e=h(),[t,n]=m(),[r,a]=g(),[,c]=p(),o=k(),[s,u]=(0,i.useState)(3),[d,f]=(0,i.useState)("#ee5126"),x=(0,i.useRef)(null),y=(0,i.useRef)(null),v="Rectangle"===r,b=(0,i.useCallback)(()=>{a.set("Rectangle"),c.set("crosshair")},[a,c]),C=(0,i.useCallback)(()=>{v||(b(),n.clearSelect())},[v,b,n]),E=(0,i.useCallback)((e,t)=>{if("Rectangle"!==e.name||!o.current)return;b();let{x1:r,y1:l,x2:i,y2:a}=V(e),c=0;N(o.current.canvas,t,{x:(r+i)/2,y:l})?c=1:N(o.current.canvas,t,{x:i,y:l})?c=2:N(o.current.canvas,t,{x:i,y:(l+a)/2})?c=3:N(o.current.canvas,t,{x:i,y:a})?c=4:N(o.current.canvas,t,{x:(r+i)/2,y:a})?c=5:N(o.current.canvas,t,{x:r,y:a})?c=6:N(o.current.canvas,t,{x:r,y:(l+a)/2})?c=7:N(o.current.canvas,t,{x:r,y:l})&&(c=8),y.current={type:0,data:{type:c,x1:t.clientX,y1:t.clientY,x2:t.clientX,y2:t.clientY},source:e},n.select(e)},[o,b,n]),_=(0,i.useCallback)(e=>{if(!v||!o.current||x.current)return;let{left:t,top:n}=o.current.canvas.getBoundingClientRect(),r=e.clientX-t,l=e.clientY-n;x.current={name:"Rectangle",type:1,data:{size:s,color:d,x1:r,y1:l,x2:r,y2:l},editHistory:[],draw:O,isHit:M}},[v,s,d,o]),Y=(0,i.useCallback)(e=>{if(v&&o.current){if(y.current)y.current.data.x2=e.clientX,y.current.data.y2=e.clientY,t.top!==y.current?(y.current.source.editHistory.push(y.current),n.push(y.current)):n.set(t);else if(x.current){let{left:r,top:l}=o.current.canvas.getBoundingClientRect(),i=x.current.data;i.x2=e.clientX-r,i.y2=e.clientY-l,t.top!==x.current?n.push(x.current):n.set(t)}}},[v,o,t,n]),P=(0,i.useCallback)(()=>{v&&(x.current&&n.clearSelect(),x.current=null,y.current=null)},[v,n]);return R(E),w(_),S(Y),j(P),(0,l.jsx)(X,{title:e.operation_rectangle_title,icon:"icon-rectangle",checked:v,onClick:C,option:(0,l.jsx)(z,{size:s,color:d,onSizeChange:u,onColorChange:f})})},function(){let e=h(),[t,n]=m(),[r,a]=g(),[,c]=p(),o=k(),[s,u]=(0,i.useState)(3),[d,f]=(0,i.useState)("#ee5126"),x=(0,i.useRef)(null),y=(0,i.useRef)(null),v="Ellipse"===r,b=(0,i.useCallback)(()=>{a.set("Ellipse"),c.set("crosshair")},[a,c]),C=(0,i.useCallback)(()=>{v||(b(),n.clearSelect())},[v,b,n]),E=(0,i.useCallback)((e,t)=>{if("Ellipse"!==e.name||!o.current)return;b();let{x1:r,y1:l,x2:i,y2:a}=W(e),c=0;N(o.current.canvas,t,{x:(r+i)/2,y:l})?c=1:N(o.current.canvas,t,{x:i,y:l})?c=2:N(o.current.canvas,t,{x:i,y:(l+a)/2})?c=3:N(o.current.canvas,t,{x:i,y:a})?c=4:N(o.current.canvas,t,{x:(r+i)/2,y:a})?c=5:N(o.current.canvas,t,{x:r,y:a})?c=6:N(o.current.canvas,t,{x:r,y:(l+a)/2})?c=7:N(o.current.canvas,t,{x:r,y:l})&&(c=8),y.current={type:0,data:{type:c,x1:t.clientX,y1:t.clientY,x2:t.clientX,y2:t.clientY},source:e},n.select(e)},[o,b,n]),_=(0,i.useCallback)(e=>{if(!v||!o.current||x.current)return;let{left:t,top:n}=o.current.canvas.getBoundingClientRect(),r=e.clientX-t,l=e.clientY-n;x.current={name:"Ellipse",type:1,data:{size:s,color:d,x1:r,y1:l,x2:r,y2:l},editHistory:[],draw:I,isHit:M}},[v,s,d,o]),Y=(0,i.useCallback)(e=>{if(v&&o.current){if(y.current)y.current.data.x2=e.clientX,y.current.data.y2=e.clientY,t.top!==y.current?(y.current.source.editHistory.push(y.current),n.push(y.current)):n.set(t);else if(x.current){let{left:r,top:l}=o.current.canvas.getBoundingClientRect();x.current.data.x2=e.clientX-r,x.current.data.y2=e.clientY-l,t.top!==x.current?n.push(x.current):n.set(t)}}},[v,o,t,n]),P=(0,i.useCallback)(()=>{v&&(x.current&&n.clearSelect(),x.current=null,y.current=null)},[v,n]);return R(E),w(_),S(Y),j(P),(0,l.jsx)(X,{title:e.operation_ellipse_title,icon:"icon-ellipse",checked:v,onClick:C,option:(0,l.jsx)(z,{size:s,color:d,onSizeChange:u,onColorChange:f})})},function(){let e=h(),[,t]=p(),[n,r]=g(),[a,c]=m(),o=k(),[s,u]=(0,i.useState)(3),[d,f]=(0,i.useState)("#ee5126"),x=(0,i.useRef)(null),y=(0,i.useRef)(null),v="Arrow"===n,b=(0,i.useCallback)(()=>{r.set("Arrow"),t.set("default")},[r,t]),C=(0,i.useCallback)(()=>{v||(b(),c.clearSelect())},[v,b,c]),E=(0,i.useCallback)((e,t)=>{if("Arrow"!==e.name||!o.current)return;b();let{x1:n,y1:r,x2:l,y2:i}=B(e),a=0;N(o.current.canvas,t,{x:n,y:r})?a=1:N(o.current.canvas,t,{x:l,y:i})&&(a=2),y.current={type:0,data:{type:a,x1:t.clientX,y1:t.clientY,x2:t.clientX,y2:t.clientY},source:e},c.select(e)},[o,b,c]),_=(0,i.useCallback)(e=>{if(!v||x.current||!o.current)return;let{left:t,top:n}=o.current.canvas.getBoundingClientRect();x.current={name:"Arrow",type:1,data:{size:s,color:d,x1:e.clientX-t,y1:e.clientY-n,x2:e.clientX-t,y2:e.clientY-n},editHistory:[],draw:T,isHit:M}},[v,d,s,o]),Y=(0,i.useCallback)(e=>{if(v&&o.current){if(y.current)y.current.data.x2=e.clientX,y.current.data.y2=e.clientY,a.top!==y.current?(y.current.source.editHistory.push(y.current),c.push(y.current)):c.set(a);else if(x.current){let{left:t,top:n}=o.current.canvas.getBoundingClientRect();x.current.data.x2=e.clientX-t,x.current.data.y2=e.clientY-n,a.top!==x.current?c.push(x.current):c.set(a)}}},[v,a,o,c]),P=(0,i.useCallback)(()=>{v&&(x.current&&c.clearSelect(),x.current=null,y.current=null)},[v,c]);return R(E),w(_),S(Y),j(P),(0,l.jsx)(X,{title:e.operation_arrow_title,icon:"icon-arrow",checked:v,onClick:C,option:(0,l.jsx)(z,{size:s,color:d,onSizeChange:u,onColorChange:f})})},function(){let e=h(),[,t]=p(),[n,r]=g(),a=k(),[c,o]=m(),[s,u]=(0,i.useState)(3),[d,f]=(0,i.useState)("#ee5126"),x=(0,i.useRef)(null),y=(0,i.useRef)(null),v="Brush"===n,b=(0,i.useCallback)(()=>{r.set("Brush"),t.set("default")},[r,t]),C=(0,i.useCallback)(()=>{v||(b(),o.clearSelect())},[v,b,o]),E=(0,i.useCallback)((e,t)=>{"Brush"===e.name&&(b(),y.current={type:0,data:{x1:t.clientX,y1:t.clientY,x2:t.clientX,y2:t.clientY},source:e},o.select(e))},[b,o]),_=(0,i.useCallback)(e=>{if(!v||x.current||!a.current)return;let{left:t,top:n}=a.current.canvas.getBoundingClientRect();x.current={name:"Brush",type:1,data:{size:s,color:d,points:[{x:e.clientX-t,y:e.clientY-n}]},editHistory:[],draw:$,isHit:M}},[v,a,s,d]),Y=(0,i.useCallback)(e=>{if(v&&a.current){if(y.current)y.current.data.x2=e.clientX,y.current.data.y2=e.clientY,c.top!==y.current?(y.current.source.editHistory.push(y.current),o.push(y.current)):o.set(c);else if(x.current){let{left:t,top:n}=a.current.canvas.getBoundingClientRect();x.current.data.points.push({x:e.clientX-t,y:e.clientY-n}),c.top!==x.current?o.push(x.current):o.set(c)}}},[v,c,a,o]),P=(0,i.useCallback)(()=>{v&&(x.current&&o.clearSelect(),x.current=null,y.current=null)},[v,o]);return R(E),w(_),S(Y),j(P),(0,l.jsx)(X,{title:e.operation_brush_title,icon:"icon-brush",checked:v,onClick:C,option:(0,l.jsx)(z,{size:s,color:d,onSizeChange:u,onColorChange:f})})},function(){let e=h(),[t,n]=m(),[r]=d(),[a,c]=g(),[,o]=p(),s=k(),[u,f]=(0,i.useState)(3),[x,y]=(0,i.useState)("#ee5126"),v=(0,i.useRef)(null),b=(0,i.useRef)(null),[C,E]=(0,i.useState)(null),[_,Y]=(0,i.useState)(""),P="Text"===a,H=(0,i.useCallback)(()=>{c.set("Text"),o.set("default")},[c,o]),M=(0,i.useCallback)(()=>{P||(H(),n.clearSelect())},[P,H,n]),N=(0,i.useCallback)(e=>{v.current&&(v.current.data.size=G[e]),f(e)},[]),B=(0,i.useCallback)(e=>{v.current&&(v.current.data.color=e),y(e)},[]),T=(0,i.useCallback)(e=>{Y(e),P&&v.current&&(v.current.data.text=e)},[P]),$=(0,i.useCallback)(()=>{var e;(null==(e=v.current)?void 0:e.data.text)&&n.push(v.current),v.current=null,Y(""),E(null)},[n]),A=(0,i.useCallback)((e,t)=>{"Text"===e.name&&(H(),b.current={type:0,data:{x1:t.clientX,y1:t.clientY,x2:t.clientX,y2:t.clientY},source:e},n.select(e))},[H,n]),L=(0,i.useCallback)(e=>{if(!P||!s.current||v.current||!r)return;let{left:t,top:n}=s.current.canvas.getBoundingClientRect(),l=window.getComputedStyle(s.current.canvas).fontFamily,i=e.clientX-t,a=e.clientY-n;v.current={name:"Text",type:1,data:{size:G[u],color:x,fontFamily:l,x:i,y:a,text:""},editHistory:[],draw:U,isHit:K},E({x:e.clientX,y:e.clientY,maxWidth:r.width-i,maxHeight:r.height-a})},[P,u,x,r,s]),W=(0,i.useCallback)(e=>{P&&b.current&&(b.current.data.x2=e.clientX,b.current.data.y2=e.clientY,t.top!==b.current?(b.current.source.editHistory.push(b.current),n.push(b.current)):n.set(t))},[P,t,n]),I=(0,i.useCallback)(()=>{P&&(b.current=null)},[P]);return R(A),w(L),S(W),j(I),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(X,{title:e.operation_text_title,icon:"icon-text",checked:P,onClick:M,option:(0,l.jsx)(z,{size:u,color:x,onSizeChange:N,onColorChange:B})}),P&&C&&(0,l.jsx)(Q,{x:C.x,y:C.y,maxWidth:C.maxWidth,maxHeight:C.maxHeight,size:G[u],color:x,value:_,onChange:T,onBlur:$})]})},function(){let e=h(),{image:t,width:n,height:r}=u(),[a,c]=g(),o=k(),[s,f]=m(),[x]=d(),[,y]=p(),[v,b]=(0,i.useState)(3),C=(0,i.useRef)(null),R=(0,i.useRef)(null),E="Mosaic"===a,_=(0,i.useCallback)(()=>{c.set("Mosaic"),y.set("crosshair")},[c,y]),Y=(0,i.useCallback)(()=>{E||(_(),f.clearSelect())},[E,_,f]),z=(0,i.useCallback)(e=>{if(!E||R.current||!C.current||!o.current)return;let t=o.current.canvas.getBoundingClientRect(),n=e.clientX-t.x,r=e.clientY-t.y;R.current={name:"Mosaic",type:1,data:{size:2*v,tiles:[{x:n,y:r,color:D(n,r,C.current)}]},editHistory:[],draw:F}},[E,v,o]),H=(0,i.useCallback)(e=>{if(!E||!R.current||!o.current||!C.current)return;let t=o.current.canvas.getBoundingClientRect(),n=e.clientX-t.x,r=e.clientY-t.y,l=R.current.data.size,i=R.current.data.tiles,a=i[i.length-1];if(a){let e=a.x-n,t=a.y-r,c=Math.sqrt(e**2+t**2),o=-t/c,s=-e/c;for(;c>l;){let e=Math.floor(a.x+l*s),t=Math.floor(a.y+l*o);a={x:e,y:t,color:D(e,t,C.current)},i.push(a),c-=l}c>l/2&&i.push({x:n,y:r,color:D(n,r,C.current)})}else i.push({x:n,y:r,color:D(n,r,C.current)});s.top!==R.current?f.push(R.current):f.set(s)},[E,o,s,f]),M=(0,i.useCallback)(()=>{E&&(R.current=null)},[E]);return w(z),S(H),j(M),(0,i.useEffect)(()=>{if(!x||!t||!E)return;let e=document.createElement("canvas"),l=e.getContext("2d");if(!l)return;e.width=x.width,e.height=x.height;let i=t.naturalWidth/n,a=t.naturalHeight/r;l.drawImage(t,x.x*i,x.y*a,x.width*i,x.height*a,0,0,x.width,x.height),C.current=l.getImageData(0,0,x.width,x.height)},[n,r,x,t,E]),(0,l.jsx)(X,{title:e.operation_mosaic_title,icon:"icon-mosaic",checked:E,onClick:Y,option:(0,l.jsx)(P,{value:v,onChange:b})})},"|",function(){let e=h(),[t,n]=m(),r=(0,i.useCallback)(()=>{n.undo()},[n]);return(0,l.jsx)(X,{title:e.operation_undo_title,icon:"icon-undo",disabled:-1===t.index,onClick:r})},function(){let e=h(),[t,n]=m(),r=(0,i.useCallback)(()=>{n.redo()},[n]);return(0,l.jsx)(X,{title:e.operation_redo_title,icon:"icon-redo",disabled:!t.stack.length||t.stack.length-1===t.index,onClick:r})},"|",function(){let{image:e,width:t,height:n,history:r,bounds:c,lang:o}=u(),s=k(),[,d]=m(),h=A(),f=L(),x=(0,i.useCallback)(()=>{d.clearSelect(),setTimeout(()=>{s.current&&e&&c&&a({image:e,width:t,height:n,history:r,bounds:c}).then(e=>{h("onSave",e,c),f()})})},[s,d,e,t,n,r,c,h,f]);return(0,l.jsx)(X,{title:o.operation_save_title,icon:"icon-save",onClick:x})},function(){let e=A(),t=L(),n=h(),r=(0,i.useCallback)(()=>{e("onCancel"),t()},[e,t]);return(0,l.jsx)(X,{title:n.operation_cancel_title,icon:"icon-cancel",onClick:r})},function(){let{image:e,width:t,height:n,history:r,bounds:c,lang:o}=u(),s=k(),[,d]=m(),h=A(),f=L(),x=(0,i.useCallback)(()=>{d.clearSelect(),setTimeout(()=>{s.current&&e&&c&&a({image:e,width:t,height:n,history:r,bounds:c}).then(e=>{h("onOk",e,c),f()})})},[s,d,e,t,n,r,c,h,f]);return(0,l.jsx)(X,{title:o.operation_ok_title,icon:"icon-ok",onClick:x})}],ee=i.createContext(null),et=(0,i.memo)(function(){let{width:e,height:t}=u(),[n]=d(),[r,a]=(0,i.useState)(null),[c,o]=(0,i.useState)(null),s=(0,i.useRef)(null),h=(0,i.useCallback)(e=>{e.stopPropagation()},[]),f=(0,i.useCallback)(e=>{e.preventDefault(),e.stopPropagation()},[]);return((0,i.useEffect)(()=>{if(!n||!s.current)return;let l=s.current.getBoundingClientRect(),i=n.x+n.width-l.width,u=n.y+n.height+10;i<0&&(i=0),i>e-l.width&&(i=e-l.width),u>t-l.height&&(u=t-l.height-10),(!c||Math.abs(c.x-i)>1||Math.abs(c.y-u)>1)&&o({x:i,y:u}),(!r||Math.abs(r.x-l.x)>1||Math.abs(r.y-l.y)>1||Math.abs(r.width-l.width)>1||Math.abs(r.height-l.height)>1)&&a({x:l.x,y:l.y,width:l.width,height:l.height})}),n)?(0,l.jsx)(ee.Provider,{value:r,children:(0,l.jsx)("div",{ref:s,className:"screenshots-operations",style:{visibility:c?"visible":"hidden",transform:`translate(${(null==c?void 0:c.x)??0}px, ${(null==c?void 0:c.y)??0}px)`},onDoubleClick:h,onContextMenu:f,children:(0,l.jsx)("div",{className:"screenshots-operations-buttons",children:Z.map((e,t)=>"|"===e?(0,l.jsx)("div",{className:"screenshots-operations-divider"},t):(0,l.jsx)(e,{},t))})})}):null});function en(e){let{url:t,width:n,height:r,lang:s,className:u,...d}=e,h=(0,i.useRef)(d);h.current=d;let f=function(e){let[t,n]=(0,i.useState)(null);return(0,i.useEffect)(()=>{if(n(null),null==e)return;let t=document.createElement("img"),r=()=>n(t),l=()=>n(null);return t.addEventListener("load",r),t.addEventListener("error",l),t.src=e,()=>{t.removeEventListener("load",r),t.removeEventListener("error",l)}},[e]),t}(t),p=(0,i.useRef)(null),y=(0,i.useRef)({}),[m,g]=(0,i.useState)({index:-1,stack:[]}),[v,b]=(0,i.useState)(null),[k,w]=(0,i.useState)("move"),[S,j]=(0,i.useState)(void 0),R={url:t,width:n,height:r,image:f,lang:{...c,...s},emitterRef:y,canvasContextRef:p,history:m,bounds:v,cursor:k,operation:S},E=(0,i.useCallback)(function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let l=h.current[e];"function"==typeof l&&l(...n)},[]),_=["screenshots"];u&&_.push(u);let X=(0,i.useCallback)(()=>{y.current={},g({index:-1,stack:[]}),b(null),w("move"),j(void 0)},[]),Y=(0,i.useCallback)(async e=>{if(0===e.button&&f)if(v&&p.current)a({image:f,width:n,height:r,history:m,bounds:v}).then(e=>{E("onOk",e,v),X()});else{let e={x:0,y:0,width:n,height:r};a({image:f,width:n,height:r,history:m,bounds:e}).then(t=>{E("onOk",t,e),X()})}},[f,m,v,n,r,E,X]),P=(0,i.useCallback)(e=>{2===e.button&&(e.preventDefault(),E("onCancel"),X())},[E,X]);return(0,i.useLayoutEffect)(()=>{X()},[t]),(0,l.jsx)(o.Provider,{value:{store:R,dispatcher:{call:E,setHistory:g,setBounds:b,setCursor:w,setOperation:j}},children:(0,l.jsxs)("div",{className:_.join(" "),style:{width:n,height:r},onDoubleClick:Y,onContextMenu:P,children:[(0,l.jsx)(x,{}),(0,l.jsx)(C,{ref:p}),(0,l.jsx)(et,{})]})})}}}]);